(()=>{var e={};e.id=106,e.ids=[106],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7337:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>h,tree:()=>d});var r=s(7096),a=s(6132),n=s(7284),l=s.n(n),i=s(2564),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);s.d(t,c);let d=["",{children:["admin",{children:["drafts",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,6145)),"/Users/yuvakiranzen/Developer/Bsm/bceoevents/app/admin/drafts/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,4708)),"/Users/yuvakiranzen/Developer/Bsm/bceoevents/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/yuvakiranzen/Developer/Bsm/bceoevents/app/admin/drafts/page.tsx"],x="/admin/drafts/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/drafts/page",pathname:"/admin/drafts",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3412:(e,t,s)=>{Promise.resolve().then(s.bind(s,6345))},6345:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>k});var r=s(3854),a=s(4218),n=s(5548),l=s.n(n),i=s(1956),c=s.n(i),d=s(2150),o=s(4448),x=s(4566);let m=a.forwardRef(function({title:e,titleId:t,...s},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"}))});var h=s(6590),u=s(9402),p=s(9618),g=s(4357),f=s(2637),b=s(856),j=s(1888);let v=a.forwardRef(function({title:e,titleId:t,...s},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))});var y=s(6874),N=s(2209),w=s(2169);function k(){let{drafts:e,loading:t,error:s,refetch:n,deleteDraft:i,publishDraft:c}=(0,w.aY)(),[h,u]=(0,a.useState)([]),[p,g]=(0,a.useState)(!1),[f,b]=(0,a.useState)(null),[j,v]=(0,a.useState)(null),k=(e,t)=>{v({type:e,message:t}),setTimeout(()=>v(null),5e3)},_=e=>{u(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},L=async()=>{if(0!==h.length){g(!0);try{for(let e of h)await i(e);k("success",`${h.length} draft(s) deleted successfully`),u([])}catch(e){k("error","Failed to delete some drafts")}finally{g(!1)}}},D=async e=>{b(e);try{await c(e),k("success","Draft published successfully!")}catch(e){k("error","Failed to publish draft")}finally{b(null)}},Z=async e=>{try{await i(e),k("success","Draft deleted successfully")}catch(e){k("error","Failed to delete draft")}};return t?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading drafts..."})]})}):s?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx(d.Z,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Drafts"}),r.jsx("p",{className:"text-gray-600 mb-4",children:s}),r.jsx("button",{onClick:n,className:"btn-primary",children:"Try Again"})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx(y.M,{children:j&&r.jsx(N.E.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"fixed top-4 right-4 z-50",children:r.jsx("div",{className:`px-6 py-4 rounded-lg shadow-lg border ${"success"===j.type?"bg-green-50 border-green-200 text-green-800":"error"===j.type?"bg-red-50 border-red-200 text-red-800":"bg-blue-50 border-blue-200 text-blue-800"}`,children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:["success"===j.type&&r.jsx(o.Z,{className:"w-5 h-5"}),"error"===j.type&&r.jsx(d.Z,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:j.message})]})})})}),r.jsx("div",{className:"bg-white border-b border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between py-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx(l(),{href:"/admin",className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",children:r.jsx(x.Z,{className:"w-5 h-5"})}),(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Draft Events"}),r.jsx("p",{className:"text-gray-600",children:"Manage your unpublished events"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[e.length," draft",1!==e.length?"s":""]}),r.jsx(l(),{href:"/admin/create",className:"btn-primary",children:"Create New Event"})]})]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:0===e.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx(m,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Draft Events"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have any draft events yet. Create your first event to get started."}),r.jsx(l(),{href:"/admin/create",className:"btn-primary",children:"Create Your First Event"})]}):(0,r.jsxs)(r.Fragment,{children:[h.length>0&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"flex items-center space-x-3",children:(0,r.jsxs)("span",{className:"text-sm font-medium text-blue-900",children:[h.length," draft",1!==h.length?"s":""," selected"]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>u([]),className:"text-sm text-blue-700 hover:text-blue-900",children:"Clear selection"}),r.jsx("button",{onClick:L,disabled:p,className:"btn-ghost text-red-600 hover:text-red-800 disabled:opacity-50",children:p?"Deleting...":"Delete Selected"})]})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("input",{type:"checkbox",checked:h.length===e.length&&e.length>0,onChange:()=>{h.length===e.length?u([]):u(e.map(e=>e._id||e.id).filter(Boolean))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),r.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Select all drafts"})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["Showing ",e.length," draft",1!==e.length?"s":""]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>r.jsx(E,{draft:e,isSelected:h.includes(e._id||e.id),onToggleSelect:()=>_(e._id||e.id),onPublish:()=>D(e._id||e.id),onDelete:()=>Z(e._id||e.id),isPublishing:f===e._id},e._id||e.id))})]})})]})}function E({draft:e,isSelected:t,onToggleSelect:s,onPublish:a,onDelete:n,isPublishing:i}){var d;return(0,r.jsxs)(N.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-white rounded-xl shadow-sm border-2 transition-all duration-200 hover:shadow-md ${t?"border-blue-500 ring-2 ring-blue-200":"border-gray-200"}`,children:[(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx("input",{type:"checkbox",checked:t,onChange:s,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("h3",{className:"font-semibold text-gray-900 line-clamp-2 text-sm",children:e.title||"Untitled Event"}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Last edited ",(e=>{if(!e)return"Unknown";let t=new Date(e),s=new Date,r=Math.floor((s.getTime()-t.getTime())/36e5);if(r<1)return"Just now";if(r<24)return`${r}h ago`;let a=Math.floor(r/24);return a<7?`${a}d ago`:`${Math.floor(a/7)}w ago`})(e.updatedAt)]})]})]}),r.jsx("div",{className:"flex items-center space-x-1",children:r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Draft"})})]}),r.jsx("div",{className:"relative h-32 bg-gray-100 rounded-lg mb-3 overflow-hidden",children:e.heroImage?r.jsx(c(),{src:e.heroImage,alt:e.title,fill:!0,className:"object-cover"}):(0,r.jsxs)("div",{className:"flex items-center justify-center h-full",children:[r.jsx(h.Z,{className:"w-8 h-8 text-gray-400"}),r.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"AI will generate"})]})}),(0,r.jsxs)("div",{className:"space-y-2",children:[e.shortDescription&&r.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.shortDescription}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[e.category&&(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx(u.Z,{className:"w-3 h-3"}),r.jsx("span",{children:e.category})]}),e.startDate&&(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx(p.Z,{className:"w-3 h-3"}),r.jsx("span",{children:(d=e.startDate)?new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"No date set"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[e.location&&(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx(g.Z,{className:"w-3 h-3"}),r.jsx("span",{children:e.location})]}),e.price&&(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx(f.Z,{className:"w-3 h-3"}),r.jsx("span",{children:e.price})]})]})]})]}),r.jsx("div",{className:"border-t border-gray-100 px-4 py-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)(l(),{href:`/admin/create?draft=${e._id||e.id}`,className:"text-xs text-blue-600 hover:text-blue-800 flex items-center space-x-1",children:[r.jsx(b.Z,{className:"w-3 h-3"}),r.jsx("span",{children:"Edit"})]}),(0,r.jsxs)("button",{onClick:n,className:"text-xs text-red-600 hover:text-red-800 flex items-center space-x-1",children:[r.jsx(j.Z,{className:"w-3 h-3"}),r.jsx("span",{children:"Delete"})]})]}),r.jsx("button",{onClick:a,disabled:i,className:"btn-primary text-xs px-3 py-1 disabled:opacity-50",children:i?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-1"}),"Publishing..."]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx(v,{className:"w-3 h-3 mr-1"}),"Publish"]})})]})})]})}},6145:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>n,default:()=>c});var r=s(5153);let a=(0,r.createProxy)(String.raw`/Users/yuvakiranzen/Developer/Bsm/bceoevents/app/admin/drafts/page.tsx`),{__esModule:n,$$typeof:l}=a,i=a.default,c=i},4357:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var r=s(4218);let a=r.forwardRef(function({title:e,titleId:t,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}),n=a},856:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var r=s(4218);let a=r.forwardRef(function({title:e,titleId:t,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}),n=a},9402:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var r=s(4218);let a=r.forwardRef(function({title:e,titleId:t,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"}))}),n=a}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[271,647,956,954],()=>s(7337));module.exports=r})();