(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[106],{8285:function(e,t,s){Promise.resolve().then(s.bind(s,7837))},7837:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return E}});var r=s(7437),a=s(2265),l=s(1396),n=s.n(l),c=s(6691),i=s.n(c),o=s(887),d=s(7805),u=s(3753);let h=a.forwardRef(function({title:e,titleId:t,...s},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"}))});var m=s(4713),x=s(2469),f=s(4103),g=s(6263),p=s(1095),v=s(2125),y=s(7227);let b=a.forwardRef(function({title:e,titleId:t,...s},r){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))});var j=s(2167),w=s(5251),N=s(8022);function E(){let{drafts:e,loading:t,error:s,refetch:l,deleteDraft:c,publishDraft:i}=(0,N.aY)(),[m,x]=(0,a.useState)([]),[f,g]=(0,a.useState)(!1),[p,v]=(0,a.useState)(null),[y,b]=(0,a.useState)(null),E=(e,t)=>{b({type:e,message:t}),setTimeout(()=>b(null),5e3)},k=e=>{x(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},C=async()=>{if(0!==m.length){g(!0);try{for(let e of m)await c(e);E("success","".concat(m.length," draft(s) deleted successfully")),x([])}catch(e){E("error","Failed to delete some drafts")}finally{g(!1)}}},T=async e=>{v(e);try{await i(e),E("success","Draft published successfully!")}catch(e){E("error","Failed to publish draft")}finally{v(null)}},S=async e=>{try{await c(e),E("success","Draft deleted successfully")}catch(e){E("error","Failed to delete draft")}};return t?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Loading drafts..."})]})}):s?(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(o.Z,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Error Loading Drafts"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:s}),(0,r.jsx)("button",{onClick:l,className:"btn-primary",children:"Try Again"})]})}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(j.M,{children:y&&(0,r.jsx)(w.E.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:"fixed top-4 right-4 z-50",children:(0,r.jsx)("div",{className:"px-6 py-4 rounded-lg shadow-lg border ".concat("success"===y.type?"bg-green-50 border-green-200 text-green-800":"error"===y.type?"bg-red-50 border-red-200 text-red-800":"bg-blue-50 border-blue-200 text-blue-800"),children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:["success"===y.type&&(0,r.jsx)(d.Z,{className:"w-5 h-5"}),"error"===y.type&&(0,r.jsx)(o.Z,{className:"w-5 h-5"}),(0,r.jsx)("span",{className:"font-medium",children:y.message})]})})})}),(0,r.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex items-center justify-between py-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(n(),{href:"/admin",className:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",children:(0,r.jsx)(u.Z,{className:"w-5 h-5"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Draft Events"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Manage your unpublished events"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-500",children:[e.length," draft",1!==e.length?"s":""]}),(0,r.jsx)(n(),{href:"/admin/create",className:"btn-primary",children:"Create New Event"})]})]})})}),(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:0===e.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)(h,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Draft Events"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"You don't have any draft events yet. Create your first event to get started."}),(0,r.jsx)(n(),{href:"/admin/create",className:"btn-primary",children:"Create Your First Event"})]}):(0,r.jsxs)(r.Fragment,{children:[m.length>0&&(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{className:"flex items-center space-x-3",children:(0,r.jsxs)("span",{className:"text-sm font-medium text-blue-900",children:[m.length," draft",1!==m.length?"s":""," selected"]})}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("button",{onClick:()=>x([]),className:"text-sm text-blue-700 hover:text-blue-900",children:"Clear selection"}),(0,r.jsx)("button",{onClick:C,disabled:f,className:"btn-ghost text-red-600 hover:text-red-800 disabled:opacity-50",children:f?"Deleting...":"Delete Selected"})]})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("input",{type:"checkbox",checked:m.length===e.length&&e.length>0,onChange:()=>{m.length===e.length?x([]):x(e.map(e=>e._id||e.id).filter(Boolean))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Select all drafts"})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["Showing ",e.length," draft",1!==e.length?"s":""]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(e=>(0,r.jsx)(D,{draft:e,isSelected:m.includes(e._id||e.id),onToggleSelect:()=>k(e._id||e.id),onPublish:()=>T(e._id||e.id),onDelete:()=>S(e._id||e.id),isPublishing:p===e._id},e._id||e.id))})]})})]})}function D(e){var t;let{draft:s,isSelected:a,onToggleSelect:l,onPublish:c,onDelete:o,isPublishing:d}=e;return(0,r.jsxs)(w.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm border-2 transition-all duration-200 hover:shadow-md ".concat(a?"border-blue-500 ring-2 ring-blue-200":"border-gray-200"),children:[(0,r.jsxs)("div",{className:"p-4",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("input",{type:"checkbox",checked:a,onChange:l,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900 line-clamp-2 text-sm",children:s.title||"Untitled Event"}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Last edited ",(e=>{if(!e)return"Unknown";let t=new Date(e),s=new Date,r=Math.floor((s.getTime()-t.getTime())/36e5);if(r<1)return"Just now";if(r<24)return"".concat(r,"h ago");let a=Math.floor(r/24);return a<7?"".concat(a,"d ago"):"".concat(Math.floor(a/7),"w ago")})(s.updatedAt)]})]})]}),(0,r.jsx)("div",{className:"flex items-center space-x-1",children:(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Draft"})})]}),(0,r.jsx)("div",{className:"relative h-32 bg-gray-100 rounded-lg mb-3 overflow-hidden",children:s.heroImage?(0,r.jsx)(i(),{src:s.heroImage,alt:s.title,fill:!0,className:"object-cover"}):(0,r.jsxs)("div",{className:"flex items-center justify-center h-full",children:[(0,r.jsx)(m.Z,{className:"w-8 h-8 text-gray-400"}),(0,r.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:"AI will generate"})]})}),(0,r.jsxs)("div",{className:"space-y-2",children:[s.shortDescription&&(0,r.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:s.shortDescription}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[s.category&&(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)(x.Z,{className:"w-3 h-3"}),(0,r.jsx)("span",{children:s.category})]}),s.startDate&&(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)(f.Z,{className:"w-3 h-3"}),(0,r.jsx)("span",{children:(t=s.startDate)?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"No date set"})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 text-xs text-gray-500",children:[s.location&&(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)(g.Z,{className:"w-3 h-3"}),(0,r.jsx)("span",{children:s.location})]}),s.price&&(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)(p.Z,{className:"w-3 h-3"}),(0,r.jsx)("span",{children:s.price})]})]})]})]}),(0,r.jsx)("div",{className:"border-t border-gray-100 px-4 py-3",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)(n(),{href:"/admin/create?draft=".concat(s._id||s.id),className:"text-xs text-blue-600 hover:text-blue-800 flex items-center space-x-1",children:[(0,r.jsx)(v.Z,{className:"w-3 h-3"}),(0,r.jsx)("span",{children:"Edit"})]}),(0,r.jsxs)("button",{onClick:o,className:"text-xs text-red-600 hover:text-red-800 flex items-center space-x-1",children:[(0,r.jsx)(y.Z,{className:"w-3 h-3"}),(0,r.jsx)("span",{children:"Delete"})]})]}),(0,r.jsx)("button",{onClick:c,disabled:d,className:"btn-primary text-xs px-3 py-1 disabled:opacity-50",children:d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white mr-1"}),"Publishing..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(b,{className:"w-3 h-3 mr-1"}),"Publish"]})})]})})]})}},8022:function(e,t,s){"use strict";s.d(t,{_x:function(){return c},aY:function(){return i},hI:function(){return n}});var r=s(2265),a=s(2601);let l=a.env.NEXT_PUBLIC_API_URL||"http://localhost:5000";function n(){let[e,t]=(0,r.useState)([]),[s,a]=(0,r.useState)(!1),[n,c]=(0,r.useState)(null),[i,o]=(0,r.useState)(null),d=async()=>{a(!0),c(null);try{console.log("\uD83D\uDD04 Fetching events from Express server...");let e=await fetch("".concat(l,"/api/events"),{method:"GET",headers:{"Content-Type":"application/json"}});if(console.log("\uD83D\uDCE1 Response status:",e.status),!e.ok)throw Error("HTTP error! status: ".concat(e.status));let s=await e.json();if(console.log("\uD83D\uDCCA Response data:",s),!1!==s.success){let e=s.events||s.data||s||[];t(Array.isArray(e)?e:[]),console.log("✅ Events loaded successfully:",e.length)}else throw Error(s.message||s.error||"Failed to fetch events")}catch(s){let e=s instanceof Error?s.message:"Failed to fetch events";console.error("❌ Fetch events error:",e),c(e),t([])}finally{a(!1)}},u=async e=>{a(!0),c(null);try{console.log("\uD83D\uDDD1️ Deleting event:",e.id);let s=await fetch("".concat(l,"/api/events/").concat(e.id),{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));let r=await s.json();if(!1!==r.success)t(t=>t.filter(t=>t.id!==e.id)),o(r.message||"Event deleted successfully"),console.log("✅ Event deleted successfully");else throw Error(r.message||r.error||"Failed to delete event")}catch(t){let e=t instanceof Error?t.message:"Failed to delete event";console.error("❌ Delete event error:",e),c(e)}finally{a(!1)}},h=async(e,s)=>{a(!0),c(null);try{console.log("\uD83D\uDCE4 Publishing event:",e,"with theme:",s);let r=await fetch("".concat(l,"/api/events/").concat(e,"/publish"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({themeId:s})});if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));let a=await r.json();if(!1!==a.success)t(t=>t.map(t=>t.id===e?{...t,status:"published",lastModified:new Date().toISOString()}:t)),o(a.message||"Event published successfully"),console.log("✅ Event published successfully");else throw Error(a.message||a.error||"Failed to publish event")}catch(t){let e=t instanceof Error?t.message:"Failed to publish event";console.error("❌ Publish event error:",e),c(e)}finally{a(!1)}},m=async e=>{a(!0),c(null);try{console.log("\uD83D\uDCBE Saving event as draft:",e.title);let s=await fetch("".concat(l,"/api/events"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,status:"published"})});if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));let r=await s.json();if(!1!==r.success){let e=r.event||r.data||r;e&&t(t=>[e,...t]),o(r.message||"Event saved as draft successfully! You can now preview and publish it from the admin dashboard."),console.log("✅ Event saved as draft successfully")}else throw Error(r.message||r.error||"Failed to save event")}catch(t){let e=t instanceof Error?t.message:"Failed to save event";console.error("❌ Save event error:",e),c(e)}finally{a(!1)}};return(0,r.useEffect)(()=>{d()},[]),{events:e,loading:s,error:n,success:i,fetchEvents:d,deleteEvent:u,publishEvent:h,saveAsDraft:m,clearMessages:()=>{c(null),o(null)}}}function c(){let[e,t]=(0,r.useState)(!1),[s,a]=(0,r.useState)(null),[n,c]=(0,r.useState)(null),i=async e=>{t(!0),a(null);try{console.log("\uD83D\uDCBE Creating new event:",e.title);let t=await fetch("".concat(l,"/api/events"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,status:"published"})});if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));let s=await t.json();if(!1!==s.success)c(s.message||"Event saved as draft successfully! You can now preview and publish it from the admin dashboard."),console.log("✅ Event created successfully");else throw Error(s.message||s.error||"Failed to save event")}catch(t){let e=t instanceof Error?t.message:"Failed to save event";console.error("❌ Create event error:",e),a(e)}finally{t(!1)}};return{loading:e,error:s,success:n,saveAsDraft:i,clearMessages:()=>{a(null),c(null)}}}function i(){let[e,t]=(0,r.useState)([]),[s,a]=(0,r.useState)(!0),[n,c]=(0,r.useState)(null),i=async()=>{a(!0),c(null);try{console.log("\uD83D\uDCC4 Fetching draft events...");let s=await fetch("".concat(l,"/api/events?status=draft"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));let r=await s.json();if(!1!==r.success){var e;t(r.events||r||[]),console.log("✅ Draft events fetched successfully:",(null===(e=r.events)||void 0===e?void 0:e.length)||(null==r?void 0:r.length)||0,"drafts")}else throw Error(r.message||r.error||"Failed to fetch draft events")}catch(t){let e=t instanceof Error?t.message:"Failed to fetch draft events";console.error("❌ Fetch drafts error:",e),c(e)}finally{a(!1)}},o=async e=>{try{console.log("\uD83D\uDDD1️ Deleting draft:",e);let s=await fetch("".concat(l,"/api/events/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));let r=await s.json();if(!1!==r.success)t(t=>t.filter(t=>(t._id||t.id)!==e)),console.log("✅ Draft deleted successfully");else throw Error(r.message||r.error||"Failed to delete draft")}catch(t){let e=t instanceof Error?t.message:"Failed to delete draft";throw console.error("❌ Delete draft error:",e),Error(e)}},d=async e=>{try{console.log("\uD83D\uDCE4 Publishing draft:",e);let s=await fetch("".concat(l,"/api/events/").concat(e,"/publish"),{method:"POST",headers:{"Content-Type":"application/json"}});if(!s.ok)throw Error("HTTP error! status: ".concat(s.status));let r=await s.json();if(!1!==r.success)t(t=>t.filter(t=>(t._id||t.id)!==e)),console.log("✅ Draft published successfully");else throw Error(r.message||r.error||"Failed to publish draft")}catch(t){let e=t instanceof Error?t.message:"Failed to publish draft";throw console.error("❌ Publish draft error:",e),Error(e)}};return(0,r.useEffect)(()=>{i()},[]),{drafts:e,loading:s,error:n,refetch:()=>{i()},deleteDraft:o,publishDraft:d}}},6263:function(e,t,s){"use strict";var r=s(2265);let a=r.forwardRef(function({title:e,titleId:t,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))});t.Z=a},2125:function(e,t,s){"use strict";var r=s(2265);let a=r.forwardRef(function({title:e,titleId:t,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))});t.Z=a},2469:function(e,t,s){"use strict";var r=s(2265);let a=r.forwardRef(function({title:e,titleId:t,...s},a){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},s),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"}))});t.Z=a}},function(e){e.O(0,[708,691,401,971,472,744],function(){return e(e.s=8285)}),_N_E=e.O()}]);