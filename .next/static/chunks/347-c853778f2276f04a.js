"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[347],{8022:function(e,t,r){r.d(t,{_x:function(){return l},aY:function(){return i},hI:function(){return s}});var o=r(2265),n=r(2601);let a=n.env.NEXT_PUBLIC_API_URL||"http://localhost:5000";function s(){let[e,t]=(0,o.useState)([]),[r,n]=(0,o.useState)(!1),[s,l]=(0,o.useState)(null),[i,c]=(0,o.useState)(null),u=async()=>{n(!0),l(null);try{console.log("\uD83D\uDD04 Fetching events from Express server...");let e=await fetch("".concat(a,"/api/events"),{method:"GET",headers:{"Content-Type":"application/json"}});if(console.log("\uD83D\uDCE1 Response status:",e.status),!e.ok)throw Error("HTTP error! status: ".concat(e.status));let r=await e.json();if(console.log("\uD83D\uDCCA Response data:",r),!1!==r.success){let e=r.events||r.data||r||[];t(Array.isArray(e)?e:[]),console.log("✅ Events loaded successfully:",e.length)}else throw Error(r.message||r.error||"Failed to fetch events")}catch(r){let e=r instanceof Error?r.message:"Failed to fetch events";console.error("❌ Fetch events error:",e),l(e),t([])}finally{n(!1)}},d=async e=>{n(!0),l(null);try{console.log("\uD83D\uDDD1️ Deleting event:",e.id);let r=await fetch("".concat(a,"/api/events/").concat(e.id),{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));let o=await r.json();if(!1!==o.success)t(t=>t.filter(t=>t.id!==e.id)),c(o.message||"Event deleted successfully"),console.log("✅ Event deleted successfully");else throw Error(o.message||o.error||"Failed to delete event")}catch(t){let e=t instanceof Error?t.message:"Failed to delete event";console.error("❌ Delete event error:",e),l(e)}finally{n(!1)}},f=async(e,r)=>{n(!0),l(null);try{console.log("\uD83D\uDCE4 Publishing event:",e,"with theme:",r);let o=await fetch("".concat(a,"/api/events/").concat(e,"/publish"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({themeId:r})});if(!o.ok)throw Error("HTTP error! status: ".concat(o.status));let n=await o.json();if(!1!==n.success)t(t=>t.map(t=>t.id===e?{...t,status:"published",lastModified:new Date().toISOString()}:t)),c(n.message||"Event published successfully"),console.log("✅ Event published successfully");else throw Error(n.message||n.error||"Failed to publish event")}catch(t){let e=t instanceof Error?t.message:"Failed to publish event";console.error("❌ Publish event error:",e),l(e)}finally{n(!1)}},h=async e=>{n(!0),l(null);try{console.log("\uD83D\uDCBE Saving event as draft:",e.title);let r=await fetch("".concat(a,"/api/events"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,status:"published"})});if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));let o=await r.json();if(!1!==o.success){let e=o.event||o.data||o;e&&t(t=>[e,...t]),c(o.message||"Event saved as draft successfully! You can now preview and publish it from the admin dashboard."),console.log("✅ Event saved as draft successfully")}else throw Error(o.message||o.error||"Failed to save event")}catch(t){let e=t instanceof Error?t.message:"Failed to save event";console.error("❌ Save event error:",e),l(e)}finally{n(!1)}};return(0,o.useEffect)(()=>{u()},[]),{events:e,loading:r,error:s,success:i,fetchEvents:u,deleteEvent:d,publishEvent:f,saveAsDraft:h,clearMessages:()=>{l(null),c(null)}}}function l(){let[e,t]=(0,o.useState)(!1),[r,n]=(0,o.useState)(null),[s,l]=(0,o.useState)(null),i=async e=>{t(!0),n(null);try{console.log("\uD83D\uDCBE Creating new event:",e.title);let t=await fetch("".concat(a,"/api/events"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,status:"published"})});if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));let r=await t.json();if(!1!==r.success)l(r.message||"Event saved as draft successfully! You can now preview and publish it from the admin dashboard."),console.log("✅ Event created successfully");else throw Error(r.message||r.error||"Failed to save event")}catch(t){let e=t instanceof Error?t.message:"Failed to save event";console.error("❌ Create event error:",e),n(e)}finally{t(!1)}};return{loading:e,error:r,success:s,saveAsDraft:i,clearMessages:()=>{n(null),l(null)}}}function i(){let[e,t]=(0,o.useState)([]),[r,n]=(0,o.useState)(!0),[s,l]=(0,o.useState)(null),i=async()=>{n(!0),l(null);try{console.log("\uD83D\uDCC4 Fetching draft events...");let r=await fetch("".concat(a,"/api/events?status=draft"),{method:"GET",headers:{"Content-Type":"application/json"}});if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));let o=await r.json();if(!1!==o.success){var e;t(o.events||o||[]),console.log("✅ Draft events fetched successfully:",(null===(e=o.events)||void 0===e?void 0:e.length)||(null==o?void 0:o.length)||0,"drafts")}else throw Error(o.message||o.error||"Failed to fetch draft events")}catch(t){let e=t instanceof Error?t.message:"Failed to fetch draft events";console.error("❌ Fetch drafts error:",e),l(e)}finally{n(!1)}},c=async e=>{try{console.log("\uD83D\uDDD1️ Deleting draft:",e);let r=await fetch("".concat(a,"/api/events/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));let o=await r.json();if(!1!==o.success)t(t=>t.filter(t=>(t._id||t.id)!==e)),console.log("✅ Draft deleted successfully");else throw Error(o.message||o.error||"Failed to delete draft")}catch(t){let e=t instanceof Error?t.message:"Failed to delete draft";throw console.error("❌ Delete draft error:",e),Error(e)}},u=async e=>{try{console.log("\uD83D\uDCE4 Publishing draft:",e);let r=await fetch("".concat(a,"/api/events/").concat(e,"/publish"),{method:"POST",headers:{"Content-Type":"application/json"}});if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));let o=await r.json();if(!1!==o.success)t(t=>t.filter(t=>(t._id||t.id)!==e)),console.log("✅ Draft published successfully");else throw Error(o.message||o.error||"Failed to publish draft")}catch(t){let e=t instanceof Error?t.message:"Failed to publish draft";throw console.error("❌ Publish draft error:",e),Error(e)}};return(0,o.useEffect)(()=>{i()},[]),{drafts:e,loading:r,error:s,refetch:()=>{i()},deleteDraft:c,publishDraft:u}}},654:function(e,t,r){var o=r(2265);let n=o.forwardRef(function({title:e,titleId:t,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?o.createElement("title",{id:t},e):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))});t.Z=n},9186:function(e,t,r){var o=r(2265);let n=o.forwardRef(function({title:e,titleId:t,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?o.createElement("title",{id:t},e):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});t.Z=n},2929:function(e,t,r){var o=r(2265);let n=o.forwardRef(function({title:e,titleId:t,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?o.createElement("title",{id:t},e):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});t.Z=n},6610:function(e,t,r){var o=r(2265);let n=o.forwardRef(function({title:e,titleId:t,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?o.createElement("title",{id:t},e):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))});t.Z=n},9367:function(e,t,r){var o=r(2265);let n=o.forwardRef(function({title:e,titleId:t,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?o.createElement("title",{id:t},e):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))});t.Z=n},3587:function(e,t,r){var o=r(2265);let n=o.forwardRef(function({title:e,titleId:t,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?o.createElement("title",{id:t},e):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}),o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 0 1 0 .656l-5.603 3.113a.375.375 0 0 1-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112Z"}))});t.Z=n},5255:function(e,t,r){var o=r(2265);let n=o.forwardRef(function({title:e,titleId:t,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?o.createElement("title",{id:t},e):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))});t.Z=n},1615:function(e,t,r){var o=r(2265);let n=o.forwardRef(function({title:e,titleId:t,...r},n){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?o.createElement("title",{id:t},e):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))});t.Z=n}}]);